---
create: 2023-04-23 21:40
aliases: 
tags:
  - BuildSystem/Codegen
  - CPP
---
我们将目前的 python 代码进行了重构整理，去掉了复制粘贴的解析 json 代码，使用了一个中心化的 python 来调度其他代码生成代码以降低启动多个 python 运行时的开销。
我们对输出的文件规范也进行了整理，考虑到编译速度以及使用心智负担，我们规范了代码生成，将生成的代码分为确定的两部分：前置声明和实现。

- 前置声明中不允许依赖完整类型，只引入接口，文件按源文件拆分，命名为对应的文件名加上 generated，比如 test.h 对应 test.generated.h，此文件由用户手动包含引入。通过这种方式，生成的代码可以和源代码保持一致的可见性。
- 实现则无其他限制，每个模块生成一个文件。
