对于手动精细控制的 AI 逻辑，或者说偏向“机制”的逻辑，一般有两种控制模式：
* 状态机/分层状态机
* 行为树
这两种其实都是执行流的一种范式，在代码里用协程可以简单模拟这种范式。
需要考虑的是如何防止协程泄漏或资源泄露，协程泄漏主要靠 GC 解决，而资源泄漏需要有类 RAII 的管理机制。
```
DOSomeThing();
defer <| CleanSomeThing();
await MayHangForever();
```