---
create: 2023-04-23 21:40
aliases: []
tags: [ECS]
---
# 问题描述
在需要跨世界同步的需求下（如网络同步，差异对比等），需要一个双方世界中 entity 的映射方式，也就是 entity 需要有一个全局唯一标识符（entity 本身属于局部唯一标识符）。
# 方案解析
使用一个 GUID component 即可，因为需要保证在 instantiate 的时候保证每个 entity 都会获得新的 ID 而不是简单复制，所以这里最好内置到库中（虽然也可以使用生命周期状态来让用户手动执行复制）
有了 GUID 之后一般会有一份映射表，这份表交由用户自己管理，管理方式可以有两种：
## 增量管理方式
在新建对象和实例化对象的时候，手动注册新对象的 GUID（用户可以自己封装一个函数）
标记 GUID component 的 manualClean 属性，在删除对象后手动回收 GUID
## 无状态管理方式
在每次要使用 GUID 之前，扫描所有的 GUID 并建立索引关系
